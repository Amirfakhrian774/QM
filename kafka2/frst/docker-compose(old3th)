version: '2.4.1'

services:
  zookeeper:
    image: wurstmeister/zookeeper:latest
    container_name: zookeeper
    ports:
      - "2181:2181"

  kafka12:
    image: wurstmeister/kafka:latest
    hostname: kafka12
    ports:
      - "9092:9092" 
    environment:
      KAFKA_BROKER_ID: 1
      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
      KAFKA_LISTENERS: SSL_INTERNAL://kafka12:29092,SSL_EXTERNAL://kafka12:9092 
      KAFKA_ADVERTISED_LISTENERS: SSL_INTERNAL://kafka12:29092,SSL_EXTERNAL://kafka12:9092 
      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: SSL_INTERNAL:SSL,SSL_EXTERNAL:SSL
      KAFKA_INTER_BROKER_LISTENER_NAME: SSL_INTERNAL
      KAFKA_SSL_KEYSTORE_LOCATION: /tmp/kafka.keystore.jks
      KAFKA_SSL_KEYSTORE_PASSWORD: your_keystore_password
      KAFKA_SSL_KEY_PASSWORD: your_key_password
      KAFKA_SSL_TRUSTSTORE_LOCATION: /tmp/kafka.truststore.jks
      KAFKA_SSL_TRUSTSTORE_PASSWORD: your_truststore_password

  kafka22:
    image: wurstmeister/kafka:latest
    hostname: kafka22
    ports:
      - "9093:9092" 
    environment:
      KAFKA_BROKER_ID: 2
      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
      KAFKA_LISTENERS: SSL_INTERNAL://kafka22:29092,SSL_EXTERNAL://kafka22:9093 
      KAFKA_ADVERTISED_LISTENERS: SSL_INTERNAL://kafka22:29092,SSL_EXTERNAL://kafka22:9093 
      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: SSL_INTERNAL:SSL,SSL_EXTERNAL:SSL
      KAFKA_INTER_BROKER_LISTENER_NAME: SSL_INTERNAL
      KAFKA_SSL_KEYSTORE_LOCATION: /tmp/kafka.keystore.jks
      KAFKA_SSL_KEYSTORE_PASSWORD: your_keystore_password
      KAFKA_SSL_KEY_PASSWORD: your_key_password
      KAFKA_SSL_TRUSTSTORE_LOCATION: /tmp/kafka.truststore.jks
      KAFKA_SSL_TRUSTSTORE_PASSWORD: your_truststore_password

  kafka32:
    image: wurstmeister/kafka:latest
    hostname: kafka32
    ports:
      - "9094:9092" 
    environment:
      KAFKA_BROKER_ID: 3
      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
      KAFKA_LISTENERS: SSL_INTERNAL://kafka32:29092,SSL_EXTERNAL://kafka32:9094 
      KAFKA_ADVERTISED_LISTENERS: SSL_INTERNAL://kafka32:29092,SSL_EXTERNAL://kafka32:9094 
      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: SSL_INTERNAL:SSL,SSL_EXTERNAL:SSL
      KAFKA_INTER_BROKER_LISTENER_NAME: SSL_INTERNAL
      KAFKA_SSL_KEYSTORE_LOCATION: /tmp/kafka.keystore.jks
      KAFKA_SSL_KEYSTORE_PASSWORD: your_keystore_password
      KAFKA_SSL_KEY_PASSWORD: your_key_password
      KAFKA_SSL_TRUSTSTORE_LOCATION: /tmp/kafka.truststore.jks
      KAFKA_SSL_TRUSTSTORE_PASSWORD: your_truststore_password